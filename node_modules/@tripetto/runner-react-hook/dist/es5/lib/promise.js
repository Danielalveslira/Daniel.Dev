"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.promise = void 0;
var promise = function (ref) {
    var promiseRef = ref.current;
    var cancel = function () {
        if (promiseRef && promiseRef.handle !== 0) {
            clearTimeout(promiseRef.handle);
            promiseRef.handle = 0;
        }
    };
    return {
        resolve: function () {
            ref.current = undefined;
            if (promiseRef) {
                cancel();
                promiseRef.resolve();
            }
        },
        reject: function () {
            ref.current = undefined;
            if (promiseRef) {
                cancel();
                promiseRef.reject();
            }
        },
        cancel: cancel,
    };
};
exports.promise = promise;
