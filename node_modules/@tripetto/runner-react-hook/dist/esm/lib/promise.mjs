const promise = (ref) => {
    const promiseRef = ref.current;
    const cancel = () => {
        if (promiseRef && promiseRef.handle !== 0) {
            clearTimeout(promiseRef.handle);
            promiseRef.handle = 0;
        }
    };
    return {
        resolve: () => {
            ref.current = undefined;
            if (promiseRef) {
                cancel();
                promiseRef.resolve();
            }
        },
        reject: () => {
            ref.current = undefined;
            if (promiseRef) {
                cancel();
                promiseRef.reject();
            }
        },
        cancel,
    };
};

export { promise };
