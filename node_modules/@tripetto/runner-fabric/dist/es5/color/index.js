"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.color = exports.getColor = void 0;
var tslib_1 = require("tslib");
var Color = tslib_1.__importStar(require("color"));
var getColor = function (input) {
    if (input) {
        input = input.toLowerCase();
        if (input !== "transparent") {
            try {
                return Color.default(input);
            } catch (_a) {
                try {
                    return Color.default("#" + input);
                } catch (_b) {
                    return Color.default("rgba(255,255,255,0)");
                }
            }
        }
    }
    return Color.default("rgba(255,255,255,0)");
};
exports.getColor = getColor;
var color = function (input, operations) {
    var clr = (0, exports.getColor)(input);
    if (operations) {
        var ops_1 = {
            manipulate: function (manipulation, condition) {
                if (condition === void 0) {
                    condition = true;
                }
                if (condition) {
                    clr = manipulation(clr);
                }
                return ops_1;
            },
            makeBlackOrWhite: function (condition) {
                if (condition === void 0) {
                    condition = true;
                }
                if (condition) {
                    var luminance = (0.299 * clr.red() + 0.587 * clr.green() + 0.114 * clr.blue()) / 255;
                    clr = clr
                        .red(luminance > 0.55 ? 0 : 255)
                        .green(luminance > 0.55 ? 0 : 255)
                        .blue(luminance > 0.55 ? 0 : 255)
                        .alpha(1);
                }
                return ops_1;
            },
            makeUnclear: function (c) {
                if (c && clr.alpha() === 0) {
                    clr = (0, exports.getColor)(c);
                }
                return ops_1;
            },
        };
        operations(ops_1);
    }
    return clr.rgb().string();
};
exports.color = color;
